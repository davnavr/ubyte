.module Arrays
.format 0 0
.version 1

.identifier @id_namespace Example
.identifier @id_class Arrays
.identifier @id_entry_point main

.signature @sig_int32 type s32
.signature @sig_string32 type char32[]
.signature @sig_argv type char32[][]
.signature @sig_main method (@sig_int32) (@sig_argv)

.code @code_main {
    .locals @sig_int32 (@l_index, @l_length, @l_acc, @l_sum)
    .locals @sig_string32 (@l_arg)
    .arguments (@a_argv)

    // Sums the lengths of all argument strings
    const.i32 0 @l_index
    obj.arr.len @a_argv @l_length
    START:
    br.eq @l_index @l_length END
    obj.arr.get @a_argv @l_index @l_arg
    obj.arr.len @l_arg @l_acc
    add @l_sum @l_acc @l_sum
    incr @l_index
    br START
    END:
    ret @l_sum
}

.namespace @namespace {
    .name @id_namespace
}

.type @class public {
    .name @id_class
    .namespace @namespace

    .method @method_main public {
        .name @id_entry_point
        .signature @sig_main
        .body defined @code_main
    }
}

.entrypoint @method_main
